# 🎮 今だ！ゲーム - サクヤの反応速度チャレンジ

忍者「サクヤ」が発する「今だ！」の合図を待ち、できるだけ素早くクリックして反応速度（ms）を競うミニゲームです。

## 🚀 プレイ方法

1. **ゲーム開始**: 画面をクリックしてゲームを開始
2. **合図待ち**: 2〜5秒後にサクヤが「今だ！」の合図を出します
3. **素早くクリック**: 合図が出たら素早くクリック！
4. **結果確認**: 反応速度が表示され、ハイスコアなら名前を登録できます

## ✨ 特徴

- 🎯 **反応速度測定**: ミリ秒単位で正確な反応速度を測定
- 🏆 **ランキング機能**: TOP5のハイスコアを記録・表示
- 👤 **名前登録**: ハイスコア達成時に名前を登録可能
- 🐦 **SNS連携**: 結果をX（旧Twitter）でシェア可能
- 🔊 **効果音**: Web Audio APIによるリアルタイム効果音
- 📱 **レスポンシブ**: PC・タブレット・スマホ対応
- 🔒 **セキュリティ**: XSS対策・入力値検証完備

## 🎵 効果音

- **成功音**: 800Hz→1000Hzの上昇音
- **失敗音**: 200Hzの警告音
- **合図音**: 600Hzの注意音

## 🛠️ 技術仕様

- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript
- **音声**: Web Audio API（音声ファイル不要）
- **データ保存**: LocalStorage
- **レスポンシブ**: CSS Media Queries
- **アーキテクチャ**: モジュラー設計・クラスベース

## 📂 ファイル構成

```
├── index.html              # メインHTMLファイル
├── style.css               # スタイルシート
├── js/                     # JavaScriptモジュール
│   ├── config.js           # 設定・定数定義
│   ├── security.js         # セキュリティユーティリティ
│   ├── audio.js            # 音声管理クラス
│   ├── ranking.js          # ランキング管理クラス
│   ├── ui.js               # UI管理クラス
│   └── game.js             # メインゲームクラス
├── assets/                 # ゲーム素材
│   ├── background.jpg      # 背景画像
│   ├── human01.png         # サクヤ通常立ち絵
│   ├── human02.png         # サクヤ合図時立ち絵
│   ├── ui.png              # 「今だ！」合図UI
│   └── ogp-image.png       # OGP画像
├── .github/workflows/      # GitHub Actions
│   └── pages.yml           # 自動デプロイ設定
├── sitemap.xml             # サイトマップ
├── robots.txt              # クローラー設定
└── README.md               # このファイル
```

## 🏗️ アーキテクチャ

### クラス設計

- **Game**: メインゲームロジック・状態管理
- **AudioManager**: 音声システム管理
- **RankingManager**: ランキングデータ管理
- **UIManager**: UI操作・表示管理
- **SecurityUtils**: セキュリティ機能

### モジュール分離

- **config.js**: 設定値・定数の一元管理
- **security.js**: XSS対策・入力検証
- **各クラス**: 単一責任原則に基づく設計

## 🎮 操作方法

- **クリック/タップ**: ゲーム開始・反応
- **Spaceキー**: クリックと同じ
- **Rキー**: ゲームリセット（非プレイ時）
- **Mキー**: ミュート切り替え

## 🏆 ランキングシステム

- TOP5のスコアを保存
- 名前（20文字以内）とタイムスタンプ付き
- ハイスコア達成時に自動で名前入力画面表示
- ランキングクリア機能付き
- 重複登録防止・データ整合性チェック

## 🔒 セキュリティ機能

- **XSS対策**: HTMLエスケープ・危険パターン検出
- **入力検証**: 文字種制限・文字数制限
- **データ保護**: JSON解析エラー処理・サイズ制限
- **重複防止**: 短時間内の同一スコア登録をブロック

## 📱 対応環境

- **PC**: Chrome, Firefox, Safari, Edge
- **モバイル**: iOS Safari, Android Chrome
- **音声**: Web Audio API対応ブラウザ

## 🚀 デプロイ

GitHub Pagesで自動デプロイ設定済み。

**公開URL**: https://yomikakisan.github.io/sakuyagameimada/

## 🔧 開発者向け

### デバッグモード

ローカル環境では自動でデバッグモードが有効化されます：

```javascript
// ブラウザコンソールでアクセス可能
window.gameDebug    // ゲーム状態情報
window.game         // ゲームインスタンス
```

### 設定カスタマイズ

`js/config.js` で各種設定を変更可能：

- ゲーム遅延時間
- ランキング件数
- 音声周波数
- セキュリティパターン

## 📄 ライセンス

MIT License

---

🎯 **目指せ！200ms以下の超人的反応速度！**